<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Java October</title>

		<meta name="description" content="October Java - Coding Dojo - Burbank">
		<meta name="author" content="Tyler Maxwell">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="../../dist/reset.css">
		<link rel="stylesheet" href="../../dist/reveal.css">
		<link rel="stylesheet" href="../../dist/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../../plugin/highlight/monokai.css">
		<style>
			.container{
				display: flex;
			}
			.col{
				flex: 2;
			}
			</style>
	</head>

	<body>
	<div class="reveal">
		<div class="slides">

			<section>
				<a href="#">
					<img
					src="./../../images/coding_dojo_logo_white.png"
					alt="cd logo"
					style="
						height: 200px;
						margin: 0 auto 4rem auto;
						background: transparent;
					"
					class="demo-logo"
					/>
				</a>
			</section>
				
			<section>
			<img width="500" src="../../images/Java-Logo.webp" alt="java logo">
			</section>

			<section>
				<img src="../../images/spring.png" alt="">
			</section>

			<section>
				<img src="../../images/spring-boot.webp" alt="">
			</section>
			
			<section>
				<h2>Day 7 and 8</h2>
				<p>
					Java Spring MVC
				</p>
			</section>
				
				
			<section data-markdown="assignments.md"
				data-separator="^---"
				data-separator-vertical="^--"
				data-separator-notes="^note:"
				data-charset="iso-8859-15">
			</section>

			<section>

				<section>
					<h3>Models</h3>
					<img src="../../images/mvc2.png" alt="" class="fragment">
				</section>

				<section>
					<h3>Models in Spring</h3>
					<h4>two parts:</h4>
					<p class="fragment">Persistence Layer</p>
					<p class="fragment">Service Layer</p>
				</section>

				<section>
					<h1>Persistence Layer</h1>
					<blockquote cite="https://login.codingdojo.com/m/315/9533/64296">
						&ldquo;This layer is in charge of managing the application's data. PL is made up of Domain models and Repositories. We will use Repositories to access our database via an object relational mapper (ORM).&rdquo;
					</blockquote>
				</section>

				<section>
					<h1>Service Layer</h1>
					<blockquote cite="https://login.codingdojo.com/m/315/9533/64296">
						&ldquo;It is made up of classes that implement the business logic of our application. It will call on the repositories to execute some sort of transaction according to the request from the user.&rdquo;
					</blockquote>
				</section>
			</section>

			<section>
				<section>
					<h3>JPA</h3>
					<p class="fragment">Java Persistence API (JPA)</p>
				</section>
				<section data-auto-animate>
					<h4 data-id="code-title"><code>pom.xml</code></h4>
					<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
						<dependency>
							<groupId>mysql</groupId>
							<artifactId>mysql-connector-java</artifactId>
							<scope>runtime</scope>
						</dependency>
						<dependency>
							<groupId>org.springframework.boot</groupId>
							<artifactId>spring-boot-starter-data-jpa</artifactId>
						</dependency>
					</code></pre>
				</section>
			</section>
			<section>
				<section>
					<h3>Connecting to MySQL</h3>
				</section>
				<section data-auto-animate>
					<h4 data-id="code-title"><code>application.properties</code></h4>
					<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
						spring.datasource.url=jdbc:mysql://localhost:3306/YOUR_SCHEMA
						spring.datasource.username=root
						spring.datasource.password=root or rootroot
						spring.datasource.driver-class-name=com.mysql.jdbc.Driver
						spring.jpa.hibernate.ddl-auto=update
					</code></pre>
				</section>
				
				<section data-auto-animate>
					<h4 data-id="code-title"><code>pom.xml</code></h4>
					<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
						<dependency>
							<groupId>org.springframework.boot</groupId>
							<artifactId>spring-boot-starter-validation</artifactId>
						</dependency>   
					</code></pre>
				</section>
				<section>
					<h1>MySQL Workbench</h1>
					<div class="r-stack">
						<img src="../../images/msw.png" alt="" width="400px" class="fragment">
						<img src="../../images/schema_button.png" alt="" class="fragment">
					</div>
			
				</section>

			</section>
				
			<section>
				<section>
					<h3>Domain Model</h3>
					<blockquote class="fragment" cite="https://login.codingdojo.com/m/315/9533/64296">
						&ldquo;The domain model is simply a <a href="https://stackoverflow.com/questions/3295496/what-is-a-javabean-exactly">Java Bean</a> that represents our "business data," or the information that we want about a particular thing.&rdquo;
					</blockquote>
				</section>
			</section>

			<section>
				<section>
					<h3>Repositories</h3>
					<p class="fragment">Data repositories are where we gain access to all our data once we start talking with the database.</p>
				</section>
				<section data-markdown="repos.md"
				data-separator="^---"
				data-separator-vertical="^--"
				data-separator-notes="^note:"
				data-charset="iso-8859-15">
			</section>
		</section>
		
		<section>
			<section>
				<h3>Services</h3>
				<p class="fragment">Services are the business logic of our application.</p>
				<p class="fragment">Services keep our code DRY.</p>
				<p class="fragment">motto: Fat models, skinny controllers</p>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>BookService.java</code></h4>
				<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
					import org.springframework.stereotype.Service;
					@Service
					public class BookService {
					}
				</code></pre>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>BookService.java</code></h4>
				<p class="fragment">link to the repository</p>
				<p class="fragment">dependency injection</p>
				<pre data-id="code-animation"><code  class="hljs r-fit" data-trim data-line-numbers="1">
					import org.springframework.stereotype.Service;
					@Service
					public class BookService {
						private final BookRepository bookRepository;
						
						public BookService(BookRepository bookRepository) {
							this.bookRepository = bookRepository;
							
						}
					</code></pre>
				</section>
				<section data-auto-animate>
					<h4 data-id="code-title"><code>BookService.java</code></h4>
					<p class="fragment">retrieve all books</p>
					<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
						import org.springframework.stereotype.Service;
						@Service
						public class BookService {
							private final BookRepository bookRepository;
							
							public BookService(BookRepository bookRepository) {
								this.bookRepository = bookRepository;
							}
							public List<Book> allBooks() {
								return bookRepository.findAll();
							}
							\
						}
					</code></pre>
				</section>
				<section data-auto-animate>
					<h4 data-id="code-title"><code>BookService.java</code></h4>
					<p class="fragment">create a book</p>
					<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
						import org.springframework.stereotype.Service;
						import com.codingdojo.mvc.models.Book;
						@Service
						public class BookService {
							private final BookRepository bookRepository;
						
							public BookService(BookRepository bookRepository) {
								this.bookRepository = bookRepository;
							}
							public List<Book> allBooks() {
								return bookRepository.findAll();
							}
							public Book createBook(Book b) {
								return bookRepository.save(b);
							}
							
						}
					</code></pre>
				</section>
				<section data-auto-animate>
					<h4 data-id="code-title"><code>BookService.java</code></h4>
					<p class="fragment">find a book</p>
				<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
					import org.springframework.stereotype.Service;
					import com.codingdojo.mvc.models.Book;
					@Service
					public class BookService {
						private final BookRepository bookRepository;
						
					public BookService(BookRepository bookRepository) {
						this.bookRepository = bookRepository;
					}
					public List<Book> allBooks() {
						return bookRepository.findAll();
					}
					public Book createBook(Book b) {
						return bookRepository.save(b);
					}
					public Book findBook(Long id) {
						Optional<Book> optionalBook = bookRepository.findById(id);
							if(optionalBook.isPresent()) {
								return optionalBook.get();
							} else {
								return null;
							}
						}
					}
				</code></pre>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>BookService.java</code></h4>
				<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
					import org.springframework.stereotype.Service;
					import com.codingdojo.mvc.models.Book;
					@Service
					public class BookService {
						private final BookRepository bookRepository;
						
					public BookService(BookRepository bookRepository) {
						this.bookRepository = bookRepository;
					}
					public List<Book> allBooks() {
						return bookRepository.findAll();
					}
					public Book createBook(Book b) {
						return bookRepository.save(b);
					}
					public Book findBook(Long id) {
						Optional<Book> optionalBook = bookRepository.findById(id);
							if(optionalBook.isPresent()) {
								return optionalBook.get();
							} else {
								return null;
							}
						}
					}
				</code></pre>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>BookService.java</code></h4>
				<pre data-id="code-animation"><code  class="hljs r-fit" data-trim>
					import org.springframework.stereotype.Service;
					import com.codingdojo.mvc.models.Book;
					@Service
					public class BookService {
						private final BookRepository bookRepository;
						
					public BookService(BookRepository bookRepository) {
						this.bookRepository = bookRepository;
					}
					public List<Book> allBooks() {
						return bookRepository.findAll();
					}
					public Book createBook(Book b) {
						return bookRepository.save(b);
					}
					public Book findBook(Long id) {
						Optional<Book> optionalBook = bookRepository.findById(id);
							if(optionalBook.isPresent()) {
								return optionalBook.get();
							} else {
								return null;
							}
						}
					}
				</code></pre>
			</section>
		</section>


		<section>
			<h1>Java CRUD</h1>
		</section>

		<section>
			<section>
				<h1>Create</h1>
				<p class="fragment"> <code>@ModelAttribute</code> & Data Binding</p>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>BookController.java</code></h4>
				<pre data-id="code-animation"><code  class="hljs r-fit" data-trim data-line-numbers="2|3|9">
					import org.springframework.web.bind.annotation.GetMapping;
					import org.springframework.validation.BindingResult;
					import org.springframework.web.bind.annotation.ModelAttribute;

					@Controller
					public class BooksController {
						
						@GetMapping("/books/new")
						public String newBook(@ModelAttribute("book") Book book) {
							return "/books/new.jsp";
						}
					}
					
				</code></pre>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>new.jsp</code></h4>
				<pre data-id="code-animation"><code width="400px"  class="hljs r-fit" data-trim data-line-numbers="4|6|7|8">
					<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
					<%@ page isErrorPage="true" %>    
					<h1>New Book</h1>
					<form:form action="/books" method="post" modelAttribute="book">
						<p>
							<form:label path="title">Title</form:label>
							<form:errors path="title"/>
							<form:input path="title"/>
						</p>
						<p>
							<form:label path="description">Description</form:label>
							<form:errors path="description"/>
							<form:textarea path="description"/>
						</p>
						<p>
							<form:label path="language">Language</form:label>
							<form:errors path="language"/>
							<form:input path="language"/>
						</p>
						<p>
							<form:label path="numberOfPages">Pages</form:label>
							<form:errors path="numberOfPages"/>     
							<form:input type="number" path="numberOfPages"/>
						</p>    
						<input type="submit" value="Submit"/>
					</form:form>    
					
					
				</code></pre>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>BookController.java</code></h4>
				<pre data-id="code-animation"><code  class="hljs" data-trim data-line-numbers="9|10|11|13">
					import org.springframework.web.bind.annotation.GetMapping;
					import org.springframework.validation.BindingResult;
					import org.springframework.web.bind.annotation.ModelAttribute;
					
					@Controller
					public class BooksController {
						
						@PostMapping("/books")
						public String create(@Valid @ModelAttribute("book") Book book, BindingResult result) {
							if (result.hasErrors()) {
								return "/books/new.jsp";
							} else {
								bookService.createBook(book);
								return "redirect:/books";
							}
						}
					}		
				</code></pre>
			</section>
			<section data-auto-animate>
				<h4 data-id="code-title"><code>Book.java</code></h4>
				<pre data-id="code-animation"><code  class="hljs" data-trim data-line-numbers="">

					@Size(min = 3, max = 40, message="Language must be at least 3 characters.")
					private String language;
	
					@NotNull
					@Min(value=100, message="Must be at least 100 pages.")
					private Integer numberOfPages;
			
				</code></pre>
			</section>
		</section>
			

		
		
		
		
		
		
		
		
		
	</div>
</div>

<script src="../../dist/reveal.js"></script>
<script src="../../plugin/zoom/zoom.js"></script>
		<script src="../../plugin/notes/notes.js"></script>
		<script src="../../plugin/search/search.js"></script>
		<script src="../../plugin/markdown/markdown.js"></script>
		<script src="../../plugin/highlight/highlight.js"></script>
		<script>

			// Also available as an ES module, see:
			// https://revealjs.com/initialization/
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,
				width: 1200,
				height: 600,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight ]
			});

		</script>

	</body>
</html>
